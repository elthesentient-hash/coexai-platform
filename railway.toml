[build]
builder = "nixpacks"
buildCommand = "cd api && npm install"

[deploy]
startCommand = "cd api && npm start"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[environments]
production = {}

[variables]
NODE_ENV = "production"
PORT = "3001"
JWT_SECRET = "${JWT_SECRET}"
DATABASE_URL = "${{Postgres.DATABASE_URL}}"
